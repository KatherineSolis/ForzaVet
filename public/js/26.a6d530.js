(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"7sWw":function(e,t,i){var a=i("VyIk");"string"==typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,n);a.locals&&(e.exports=a.locals)},"HF+U":function(e,t,i){"use strict";i("7sWw");var a="@@wavesContext";function n(e,t){function i(i){var a=Object.assign({},t.value),n=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),r=n.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var s=r.getBoundingClientRect(),o=r.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":((o=document.createElement("span")).className="waves-ripple",o.style.height=o.style.width=Math.max(s.width,s.height)+"px",r.appendChild(o)),n.type){case"center":o.style.top=s.height/2-o.offsetHeight/2+"px",o.style.left=s.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(i.pageY-s.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(i.pageX-s.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=n.color,o.className="waves-ripple z-active",!1}}return e[a]?e[a].removeHandle=i:e[a]={removeHandle:i},i}var r={bind:function(e,t){e.addEventListener("click",n(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[a].removeHandle,!0),e.addEventListener("click",n(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[a].removeHandle,!1),e[a]=null,delete e[a]}},s=function(e){e.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(s)),r.install=s;t.a=r},KUhW:function(e,t,i){"use strict";i.r(t);var a=i("o0o1"),n=i.n(a),r=i("yXPU"),s=i.n(r),o=i("J4zp"),l=i.n(o),c=(i("VXQK"),i("9f/t")),d=i("PN1e"),u=i("5E5Q"),p=i("PjKf"),m=i("HF+U"),f=i("ogxq"),g=i("xCiW"),h={components:{FullCalendar:c.a},directives:{waves:m.a},data:function(){var e=this;return{calendarOptions:{plugins:[d.b,f.a,u.a,p.a],initialView:"dayGridMonth",dateClick:this.handleDateClick,editable:!0,weekends:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,select:this.handleDateSelect,eventClick:this.handleEventClick,eventsSet:this.handleEvents,currentEvents:[],timeZone:"local",locale:"es"},listLoading:!1,listQuery:{page:1,limit:20,importance:void 0,name:void 0,type:void 0,sort:"+id"},list:null,listPersonal:null,showReviewer:!1,dialogFormVisible:!1,dialogStatus:"",optionsPersonal:[],optionsClient:[],optionsPet:[],textMap:{update:"Editar",create:"Crear"},rules:{title:[{required:!0,message:"type is required",trigger:"change"}],registration_date:[{required:!0,message:"type is required",trigger:"change"}],hours:[{required:!0,message:"type is required",trigger:"change"}],client_id:[{required:!0,message:"type is required",trigger:"change"}],pet_id:[{required:!0,message:"type is required",trigger:"change"}],description:[{required:!0,message:"type is required",trigger:"change"}],personal_id:[{required:!0,message:"type is required",trigger:"change"},{validator:function(t,i,a){var n=e.temp.registration_date.toLocaleDateString().split("/"),r=n[2]+"-"+e.fechaMes(n[1])+"-"+e.fechaMes(n[0]),s=e.temp.hours.toLocaleTimeString();console.log("dateString",r),console.log("timeString",s),console.log(i);var o=!1;i>=1&&""!=r&&""!=s?Object.entries(e.list).forEach((function(t){var a=l()(t,2),n=(a[0],a[1]);i==n.personal_id&&r==n.registration_date&&s==n.hours&&(console.log("No se puede registrar la cita",n.registration_date),e.$notify({title:"No se puede registrar la cita",message:"Ya existe una cita con los mismos datos",type:"error",duration:3e3}),o=!0)})):console.log("es valido"),e.validacionCita=!!o},trigger:["blur","change"]}]},temp:{id:void 0,description:"",personal_id:"",pet_id:"",client_id:"",registration_date:"",hours:""},validacionCita:!1}},created:function(){this.getList(),this.getListPersonal(),this.getListClient()},methods:{handleDateClick:function(e){},toggleWeekends:function(){this.calendarOptions.weekends=!this.calendarOptions.weekends},agendamiento:function(){},handleEvents:function(e){this.currentEvents=e},getList:function(){var e=this;return s()(n.a.mark((function t(){var i,a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(g.g)();case 3:i=t.sent,a=i.data,r=e.$refs.fullCalendar.getApi(),e.list=a.items,e.listLoading=!1,Object.entries(e.list).forEach((function(e){var t=l()(e,2),i=(t[0],t[1]);if(i.description){var a=i.hours.split(":"),n=i.registration_date.split("-"),s="".concat(n[0],"-").concat(n[1],"-").concat(n[2],"T").concat(a[0],":").concat(a[1],":").concat(a[2],"-05:00"),o="".concat(n[0],"-").concat(n[1],"-").concat(n[2],"T").concat(a[0],":30:").concat(a[2],"-05:00");r.addEvent({title:i.description,start:s,end:o,allDay:!0})}}));case 9:case"end":return t.stop()}}),t)})))()},getListPersonal:function(){var e=this;return s()(n.a.mark((function t(){var i,a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(g.c)();case 3:for(r in i=t.sent,(a=i.data).items)e.optionsPersonal.push({value:a.items[r].id,label:a.items[r].first_name+" "+a.items[r].last_name});e.listLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},getListClient:function(){var e=this;return s()(n.a.mark((function t(){var i,a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(g.b)();case 3:for(r in i=t.sent,(a=i.data).items)e.optionsClient.push({value:a.items[r].id,label:a.items[r].first_name+" "+a.items[r].last_name});e.listLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},getListPet:function(){var e=this;return s()(n.a.mark((function t(){var i,a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(g.d)(e.temp);case 3:for(r in i=t.sent,a=i.data,e.optionsPet=[],a.items)e.optionsPet.push({value:a.items[r].id,label:a.items[r].name});e.listLoading=!1;case 8:case"end":return t.stop()}}),t)})))()},resetTemp:function(){this.temp={id:void 0,personal_id:"",pet_id:"",client_id:"",description:"",registration_date:"",hours:""}},handleCreate:function(){var e=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs.dataForm.clearValidate()}))},createData:function(){var e=this;this.$refs.dataForm.validate((function(t){if(t){var i=e.temp,a=i.registration_date.toLocaleDateString().split("/");e.temp.id=e.list[e.list.length-1].id+1,e.temp.status=1,e.temp.hours=i.hours.toLocaleTimeString(),e.temp.registration_date="".concat(a[2],"-").concat(a[1],"-").concat(a[0]),Object(g.f)(e.temp).then((function(t){e.dialogFormVisible=!1,e.$router.go(0),e.getList(),e.$message({message:"Se agendo la cita"+e.temp.description+"("+e.temp.registration_date+" "+e.temp.hours+") correctamento.",type:"success",duration:5e3})}))}}))},fechaMes:function(e){return e<=9&&e>=1?"0"+e:e}}},v=i("KHd+"),b=Object(v.a)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-row",[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("Agendar Citas")])]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("Nueva Cita")]),e._v(" "),i("br"),e._v(" "),i("br"),e._v(" "),i("FullCalendar",{ref:"fullCalendar",attrs:{options:e.calendarOptions}}),e._v(" "),i("el-dialog",{staticStyle:{"min-width":"100vh"},attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"dataForm",staticStyle:{padding:"0px 30px"},attrs:{rules:e.rules,model:e.temp}},[i("el-form-item",{attrs:{label:"Fecha/Hora de cita",prop:"registration_date"}},[i("el-col",{staticStyle:{width:"100%"},attrs:{span:11}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Seleccione Fecha"},model:{value:e.temp.registration_date,callback:function(t){e.$set(e.temp,"registration_date",t)},expression:"temp.registration_date"}})],1),e._v(" "),i("el-col",{staticStyle:{width:"100%"},attrs:{span:11}},[i("el-time-picker",{staticStyle:{width:"100%"},attrs:{type:"fixed-time",placeholder:"Seleccione hora"},model:{value:e.temp.hours,callback:function(t){e.$set(e.temp,"hours",t)},expression:"temp.hours"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"Titulo de cita",prop:"description"}},[i("el-input",{staticStyle:{width:"100%"},model:{value:e.temp.description,callback:function(t){e.$set(e.temp,"description",t)},expression:"temp.description"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Veterinario",prop:"personal_id"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Veterinario"},model:{value:e.temp.personal_id,callback:function(t){e.$set(e.temp,"personal_id",t)},expression:"temp.personal_id"}},e._l(e.optionsPersonal,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"Cliente",prop:"client_id"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Seleccione un cliente"},on:{input:e.getListPet},model:{value:e.temp.client_id,callback:function(t){e.$set(e.temp,"client_id",t)},expression:"temp.client_id"}},e._l(e.optionsClient,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"Mascota",prop:"pet_id"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Seleccione un mascota"},model:{value:e.temp.pet_id,callback:function(t){e.$set(e.temp,"pet_id",t)},expression:"temp.pet_id"}},e._l(e.optionsPet,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("\n            "+e._s(e.$t("table.cancel"))+"\n          ")]),e._v(" "),i("el-button",{attrs:{type:"primary",disabled:e.validacionCita},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v("\n            "+e._s(e.$t("table.confirm"))+"\n          ")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=b.exports},VyIk:function(e,t,i){(t=i("JPst")(!1)).push([e.i,".waves-ripple {\r\n    position: absolute;\r\n    border-radius: 100%;\r\n    background-color: rgba(0, 0, 0, 0.15);\r\n    background-clip: padding-box;\r\n    pointer-events: none;\r\n    -webkit-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n    -webkit-transform: scale(0);\r\n    transform: scale(0);\r\n    opacity: 1;\r\n}\r\n\r\n.waves-ripple.z-active {\r\n    opacity: 0;\r\n    -webkit-transform: scale(2);\r\n    transform: scale(2);\r\n    -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\r\n    transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\r\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out;\r\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out, -webkit-transform 0.6s ease-out;\r\n}",""]),e.exports=t},xCiW:function(e,t,i){"use strict";i.d(t,"g",(function(){return n})),i.d(t,"f",(function(){return r})),i.d(t,"k",(function(){return s})),i.d(t,"c",(function(){return o})),i.d(t,"b",(function(){return l})),i.d(t,"d",(function(){return c})),i.d(t,"e",(function(){return d})),i.d(t,"a",(function(){return u})),i.d(t,"i",(function(){return p})),i.d(t,"j",(function(){return m})),i.d(t,"h",(function(){return f}));var a=i("rywy");function n(e){return Object(a.a)({url:"/citas",method:"get",params:e})}function r(e){return Object(a.a)({url:"/cita/create",method:"post",data:e})}function s(e){return Object(a.a)({url:"/cita/update/"+e.id,method:"post",data:e})}function o(){return Object(a.a)({url:"/cita/personals",method:"get"})}function l(){return Object(a.a)({url:"/cita/client",method:"get"})}function c(e){return Object(a.a)({url:"/cita/pet",method:"get",params:e})}function d(){return Object(a.a)({url:"/cita/vaccine",method:"get"})}function u(){return Object(a.a)({url:"/cita/antiparasitic",method:"get"})}function p(e){return Object(a.a)({url:"/cita/consultar/"+e,method:"post",data:e})}function m(e){return Object(a.a)({url:"/cita/history/"+e,method:"post",data:e})}function f(){return Object(a.a)({url:"/cita/list/pet",method:"get"})}}}]);