(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"7sWw":function(e,t,a){var i=a("VyIk");"string"==typeof i&&(i=[[e.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,n);i.locals&&(e.exports=i.locals)},"HF+U":function(e,t,a){"use strict";a("7sWw");var i="@@wavesContext";function n(e,t){function a(a){var i=Object.assign({},t.value),n=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),r=n.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var s=r.getBoundingClientRect(),o=r.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":((o=document.createElement("span")).className="waves-ripple",o.style.height=o.style.width=Math.max(s.width,s.height)+"px",r.appendChild(o)),n.type){case"center":o.style.top=s.height/2-o.offsetHeight/2+"px",o.style.left=s.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(a.pageY-s.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(a.pageX-s.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=n.color,o.className="waves-ripple z-active",!1}}return e[i]?e[i].removeHandle=a:e[i]={removeHandle:a},a}var r={bind:function(e,t){e.addEventListener("click",n(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[i].removeHandle,!0),e.addEventListener("click",n(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[i].removeHandle,!1),e[i]=null,delete e[i]}},s=function(e){e.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(s)),r.install=s;t.a=r},VyIk:function(e,t,a){(t=a("JPst")(!1)).push([e.i,".waves-ripple {\r\n    position: absolute;\r\n    border-radius: 100%;\r\n    background-color: rgba(0, 0, 0, 0.15);\r\n    background-clip: padding-box;\r\n    pointer-events: none;\r\n    -webkit-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n    -webkit-transform: scale(0);\r\n    transform: scale(0);\r\n    opacity: 1;\r\n}\r\n\r\n.waves-ripple.z-active {\r\n    opacity: 0;\r\n    -webkit-transform: scale(2);\r\n    transform: scale(2);\r\n    -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\r\n    transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\r\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out;\r\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out, -webkit-transform 0.6s ease-out;\r\n}",""]),e.exports=t},k2p4:function(e,t,a){"use strict";a.r(t);var i=a("o0o1"),n=a.n(i),r=a("J4zp"),s=a.n(r),o=a("yXPU"),l=a.n(o),c=(a("VXQK"),a("9f/t")),u=a("PN1e"),d=a("5E5Q"),p=a("PjKf"),m=a("HF+U"),f=a("ogxq"),h=a("xCiW"),v={components:{FullCalendar:c.a},directives:{waves:m.a},data:function(){return{calendarOptions:{plugins:[u.b,f.a,d.a,p.a],initialView:"dayGridMonth",dateClick:this.handleDateClick,editable:!0,weekends:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,select:this.handleDateSelect,eventClick:this.handleEventClick,eventsSet:this.handleEvents,headerToolbar:{left:"prev,next today",right:"dayGridMonth,timeGridWeek,timeGridDay"},slotMinTime:"08:00:00",slotMaxTime:"18:00:00",height:"auto",events:[],timeZone:"local",locale:"es"},listLoading:!1,listQuery:{page:1,limit:20,importance:void 0,name:void 0,type:void 0,sort:"+id"},list:null,listPersonal:null,showReviewer:!1,dialogFormVisible:!1,dialogStatus:"",optionsPersonal:[],optionsClient:[],optionsPet:[],textMap:{update:"Editar",create:"Crear"},rules:{title:[{required:!0,message:"type is required",trigger:"change"}],registration_date:[{required:!0,message:"type is required",trigger:"change"}],hours:[{required:!0,message:"type is required",trigger:"change"}],client_id:[{required:!0,message:"type is required",trigger:"change"}],pet_id:[{required:!0,message:"type is required",trigger:"change"}],description:[{required:!0,message:"type is required",trigger:"change"}],personal_id:[{required:!0,message:"type is required",trigger:"change"}]},temp:{id:void 0,description:"",personal_id:"",pet_id:"",client_id:"",registration_date:"",hours:"",horaFin:"",end:""},razon:[{value:"Consulta",label:"Consulta"},{value:"Peluqueria",label:"Peluquería"},{value:"Cirugia",label:"Cirugía"},{value:"Vacunacion",label:"Vacunación"},{value:"Examenes",label:"Examenes"},{value:"Desparasitacion",label:"Desparasitación"}],duracion:[{value:"900",label:"15 minutos"},{value:"1800",label:"30 minutos"},{value:"3600",label:"1 hora"},{value:"5400",label:"1 hora y 30 minutos"},{value:"7200",label:"2 horas"},{value:"10800",label:"3 horas"}]}},created:function(){this.getList(),this.getListPersonal(),this.getListClient(),this.getListPet()},methods:{handleDateClick:function(e){this.handleCreate(),this.temp.registration_date=e.date,this.temp.hours=e.date,this.temp.fechaEntera=e.dateStr},getEvents:function(){console.log("en el evento"),console.log(this.list),this.calendarOptions.events=[{title:this.list.description,start:this.list.fechaEntera,end:this.list.horafin}]},toggleWeekends:function(){this.calendarOptions.weekends=!this.calendarOptions.weekends},agendamiento:function(){console.log(this.calendarOptions.headerToolbar),console.log(this.calendarOptions.initialView)},getList:function(){var e=this;return l()(n.a.mark((function t(){var a,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(h.g)();case 3:a=t.sent,i=a.data,e.$refs.fullCalendar.getApi(),e.list=i.items,e.listLoading=!1,Object.entries(e.list).forEach((function(t){var a=s()(t,2),i=(a[0],a[1]);if(i.description){i.hours.split(":"),i.registration_date.split("-");e.list.fechaEntera=new Date(i.registration_date+" "+i.hours),e.list.horafin=new Date(i.end),console.log(e.list.fechaEntera),console.log(e.list.horafin),e.getEvents()}}));case 9:case"end":return t.stop()}}),t)})))()},getListPersonal:function(){var e=this;return l()(n.a.mark((function t(){var a,i,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(h.c)();case 3:for(r in a=t.sent,(i=a.data).items)e.optionsPersonal.push({value:i.items[r].id,label:i.items[r].first_name+" "+i.items[r].last_name});e.listLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},getListClient:function(){var e=this;return l()(n.a.mark((function t(){var a,i,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(h.b)();case 3:for(r in a=t.sent,(i=a.data).items)e.optionsClient.push({value:i.items[r].id,label:i.items[r].first_name+" "+i.items[r].last_name});e.listLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},getListPet:function(){var e=this;return l()(n.a.mark((function t(){var a,i,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(h.d)(e.temp);case 3:for(r in a=t.sent,i=a.data,e.optionsPet=[],i.items)e.optionsPet.push({value:i.items[r].id,label:i.items[r].name});e.listLoading=!1;case 8:case"end":return t.stop()}}),t)})))()},resetTemp:function(){this.temp={id:void 0,personal_id:"",pet_id:"",client_id:"",description:"",registration_date:"",hours:"",horaFin:"",end:""}},handleCreate:function(){var e=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs.dataForm.clearValidate()}))},createData:function(){var e=this;this.$refs.dataForm.validate((function(t){if(t){var a=e.temp.registration_date,i=a.getSeconds()+e.temp.end;a.setSeconds(i),e.temp.horafin=a,console.log("hora fin",e.temp.horafin);var n=e.temp,r=n.registration_date.toLocaleDateString().split("/");e.temp.status=1,e.temp.hours=n.hours.toLocaleTimeString(),e.temp.registration_date="".concat(r[2],"-").concat(r[1],"-").concat(r[0])}}))},fechaMes:function(e){return e<=9&&e>=1?"0"+e:e}}},g=a("KHd+"),b=Object(g.a)(v,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("Agendar Citas")])]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.agendamiento}},[e._v("Nueva Cita")]),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("FullCalendar",{ref:"fullCalendar",attrs:{options:e.calendarOptions}}),e._v(" "),a("el-dialog",{staticStyle:{"min-width":"100vh"},attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{padding:"0px 30px"},attrs:{rules:e.rules,model:e.temp}},[a("el-form-item",{attrs:{label:"Fecha/Hora de cita",prop:"registration_date"}},[a("el-col",{staticStyle:{width:"100%"},attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Seleccione Fecha"},model:{value:e.temp.registration_date,callback:function(t){e.$set(e.temp,"registration_date",t)},expression:"temp.registration_date"}})],1),e._v(" "),a("el-col",{staticStyle:{width:"100%"},attrs:{span:11}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{type:"time",placeholder:"Seleccione hora",min:"08:00:00",max:"18:00:00"},model:{value:e.temp.hours,callback:function(t){e.$set(e.temp,"hours",t)},expression:"temp.hours"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Titulo de cita",prop:"description"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Veterinario"},model:{value:e.temp.description,callback:function(t){e.$set(e.temp,"description",t)},expression:"temp.description"}},e._l(e.razon,(function(e){return a("el-option",{key:"1"+e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Duración de cita",prop:"end"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Duración"},model:{value:e.temp.end,callback:function(t){e.$set(e.temp,"end",t)},expression:"temp.end"}},e._l(e.duracion,(function(e,t){return a("el-option",{key:"ffff"+t,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Veterinario",prop:"personal_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Veterinario"},model:{value:e.temp.personal_id,callback:function(t){e.$set(e.temp,"personal_id",t)},expression:"temp.personal_id"}},e._l(e.optionsPersonal,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Cliente",prop:"client_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Seleccione un cliente"},on:{input:e.getListPet},model:{value:e.temp.client_id,callback:function(t){e.$set(e.temp,"client_id",t)},expression:"temp.client_id"}},e._l(e.optionsClient,(function(e){return a("el-option",{key:"ll"+e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Mascota",prop:"pet_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Seleccione un mascota"},model:{value:e.temp.pet_id,callback:function(t){e.$set(e.temp,"pet_id",t)},expression:"temp.pet_id"}},e._l(e.optionsPet,(function(e){return a("el-option",{key:"kk"+e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("\n            "+e._s(e.$t("table.cancel"))+"\n          ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v("\n            "+e._s(e.$t("table.confirm"))+"\n          ")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=b.exports},xCiW:function(e,t,a){"use strict";a.d(t,"g",(function(){return n})),a.d(t,"f",(function(){return r})),a.d(t,"k",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"i",(function(){return p})),a.d(t,"j",(function(){return m})),a.d(t,"h",(function(){return f}));var i=a("rywy");function n(e){return Object(i.a)({url:"/citas",method:"get",params:e})}function r(e){return Object(i.a)({url:"/cita/create",method:"post",data:e})}function s(e){return Object(i.a)({url:"/cita/update/"+e.id,method:"post",data:e})}function o(){return Object(i.a)({url:"/cita/personals",method:"get"})}function l(){return Object(i.a)({url:"/cita/client",method:"get"})}function c(e){return Object(i.a)({url:"/cita/pet",method:"get",params:e})}function u(){return Object(i.a)({url:"/cita/vaccine",method:"get"})}function d(){return Object(i.a)({url:"/cita/antiparasitic",method:"get"})}function p(e){return Object(i.a)({url:"/cita/consultar/"+e,method:"post",data:e})}function m(e){return Object(i.a)({url:"/cita/history/"+e,method:"post",data:e})}function f(){return Object(i.a)({url:"/cita/list/pet",method:"get"})}}}]);